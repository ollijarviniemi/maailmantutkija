{
  "meta": {
    "id": "edge-cases-test",
    "title": "Edge Cases Test Level",
    "description": "Tests edge cases: max capacity observation (25+ balls), min/max parameters, overflow handling",
    "bettingConfig": {
      "granularity": 10
    }
  },
  "grid": {
    "width": 14,
    "height": 8
  },
  "components": [
    {
      "id": 1,
      "type": "sack",
      "position": {"x": 1, "y": 1},
      "params": {
        "color": "red",
        "direction": "right"
      }
    },
    {
      "id": 2,
      "type": "conveyor",
      "position": {"x": 2, "y": 1},
      "params": {
        "direction": "right"
      }
    },
    {
      "id": 3,
      "type": "duplicator",
      "position": {"x": 3, "y": 1},
      "params": {
        "copies": 10,
        "outputPattern": [
          {"side": "right", "count": 10}
        ],
        "plex": false,
        "outputDelay": 200
      }
    },
    {
      "id": 4,
      "type": "conveyor",
      "position": {"x": 4, "y": 1},
      "params": {
        "direction": "right"
      }
    },
    {
      "id": 5,
      "type": "observation",
      "position": {"x": 5, "y": 1},
      "params": {
        "label": "Overflow Test (30+ balls)",
        "ballScale": 0.15
      }
    },
    {
      "id": 6,
      "type": "sack",
      "position": {"x": 1, "y": 3},
      "params": {
        "color": "blue",
        "direction": "right"
      }
    },
    {
      "id": 7,
      "type": "conveyor",
      "position": {"x": 2, "y": 3},
      "params": {
        "direction": "right"
      }
    },
    {
      "id": 8,
      "type": "shuffler",
      "position": {"x": 3, "y": 3},
      "params": {
        "numInputs": 2,
        "input1Side": "left",
        "input2Side": "up",
        "minBufferSize": 10,
        "outputPattern": [
          {"side": "right", "count": 5},
          {"retain": true, "count": 5}
        ],
        "outputDelay": 300
      }
    },
    {
      "id": 9,
      "type": "conveyor",
      "position": {"x": 3, "y": 2},
      "params": {
        "direction": "down"
      }
    },
    {
      "id": 10,
      "type": "conveyor",
      "position": {"x": 4, "y": 3},
      "params": {
        "direction": "right"
      }
    },
    {
      "id": 11,
      "type": "observation",
      "position": {"x": 5, "y": 3},
      "params": {
        "label": "Max Retention Test",
        "ballScale": 0.15
      }
    },
    {
      "id": 12,
      "type": "sack",
      "position": {"x": 1, "y": 5},
      "params": {
        "color": "green",
        "direction": "right"
      }
    },
    {
      "id": 13,
      "type": "conveyor",
      "position": {"x": 2, "y": 5},
      "params": {
        "direction": "right"
      }
    },
    {
      "id": 14,
      "type": "filter",
      "position": {"x": 3, "y": 5},
      "params": {
        "capacity": 10,
        "targetColor": "green",
        "direction": "left",
        "matchOutputSide": "left",
        "nonMatchOutputSide": "right",
        "plex": false,
        "outputDelay": 200
      }
    },
    {
      "id": 15,
      "type": "observation",
      "position": {"x": 4, "y": 5},
      "params": {
        "label": "Non-Match (empty)",
        "ballScale": 0.15
      }
    },
    {
      "id": 16,
      "type": "observation",
      "position": {"x": 2, "y": 5},
      "params": {
        "label": "All Match",
        "ballScale": 0.15
      }
    },
    {
      "id": 17,
      "type": "sack",
      "position": {"x": 7, "y": 1},
      "params": {
        "color": "purple",
        "direction": "right"
      }
    },
    {
      "id": 18,
      "type": "conveyor",
      "position": {"x": 8, "y": 1},
      "params": {
        "direction": "right"
      }
    },
    {
      "id": 19,
      "type": "duplicator",
      "position": {"x": 9, "y": 1},
      "params": {
        "copies": 6,
        "outputPattern": [
          {"side": "right", "count": 2},
          {"side": "down", "count": 2},
          {"side": "left", "count": 1},
          {"side": "up", "count": 1}
        ],
        "plex": false,
        "outputDelay": 400
      }
    },
    {
      "id": 20,
      "type": "observation",
      "position": {"x": 10, "y": 1},
      "params": {
        "label": "Right (2)",
        "ballScale": 0.15
      }
    },
    {
      "id": 21,
      "type": "observation",
      "position": {"x": 9, "y": 2},
      "params": {
        "label": "Down (2)",
        "ballScale": 0.15
      }
    },
    {
      "id": 22,
      "type": "observation",
      "position": {"x": 8, "y": 1},
      "params": {
        "label": "Left (1)",
        "ballScale": 0.15
      }
    },
    {
      "id": 23,
      "type": "observation",
      "position": {"x": 9, "y": 0},
      "params": {
        "label": "Up (1)",
        "ballScale": 0.15
      }
    },
    {
      "id": 24,
      "type": "sack",
      "position": {"x": 7, "y": 5},
      "params": {
        "color": "yellow",
        "direction": "right"
      }
    },
    {
      "id": 25,
      "type": "conveyor",
      "position": {"x": 8, "y": 5},
      "params": {
        "direction": "right"
      }
    },
    {
      "id": 26,
      "type": "shuffler",
      "position": {"x": 9, "y": 5},
      "params": {
        "numInputs": 1,
        "input1Side": "left",
        "minBufferSize": 1,
        "outputPattern": [
          {"side": "right", "count": 1}
        ],
        "outputDelay": 500
      }
    },
    {
      "id": 27,
      "type": "observation",
      "position": {"x": 10, "y": 5},
      "params": {
        "label": "Min Config (1 input, 1 output)",
        "ballScale": 0.15
      }
    }
  ],
  "connections": [
    {"from": 1, "to": 2},
    {"from": 2, "to": 3},
    {"from": 3, "to": 4},
    {"from": 4, "to": 5},
    {"from": 6, "to": 7},
    {"from": 7, "to": 8},
    {"from": 9, "to": 8},
    {"from": 8, "to": 10},
    {"from": 10, "to": 11},
    {"from": 12, "to": 13},
    {"from": 13, "to": 14},
    {"from": 14, "to": 15, "fromPort": "right"},
    {"from": 14, "to": 16, "fromPort": "left"},
    {"from": 17, "to": 18},
    {"from": 18, "to": 19},
    {"from": 19, "to": 20, "fromPort": "right"},
    {"from": 19, "to": 21, "fromPort": "down"},
    {"from": 19, "to": 22, "fromPort": "left"},
    {"from": 19, "to": 23, "fromPort": "up"},
    {"from": 24, "to": 25},
    {"from": 25, "to": 26},
    {"from": 26, "to": 27}
  ],
  "hypothesisSpace": {
    "type": "independent",
    "components": {}
  },
  "hypothesisScript": "",
  "samplingSchedule": null,
  "simulation": {
    "ballProductionInterval": 1500,
    "ballSpeed": 1.0,
    "ballsToSpawn": 50,
    "seed": 42
  }
}
